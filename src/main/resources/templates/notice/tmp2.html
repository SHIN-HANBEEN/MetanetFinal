<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
	<title>Hello, world!</title>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

	<!--     Fonts and icons     -->
	<link rel="stylesheet" type="text/css"
		href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900|Roboto+Slab:400,700" />
	<!-- Nucleo Icons -->
	<link href="../assets/css/nucleo-icons.css" rel="stylesheet" />
	<link href="../assets/css/nucleo-svg.css" rel="stylesheet" />
	<!-- Font Awesome Icons -->
	<script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
	<!-- Material Icons -->
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
	<!-- Material Kit CSS -->
	<!--<link href="./assets/css/material-kit.css?v=3.0.0" rel="stylesheet" />-->
	<link href="../assets/css/material-kit.css?v=3.0.0" rel="stylesheet" />

	<style>
		.marginstyle {
			/*
			margin-top: auto !important;
  			margin-bottom: auto !important;
  			*/
  			margin-top : 50px;
  			margin-bottom : -500px;
  			height : 800px;
		}
	</style>
</head>

<body>
	<div th:replace="~{fragments/navbarFragment :: navbar}"></div>
	<!-- Include navbar fragment -->

	<!-- header -->
	<div class="page-header" style="height: 90vh; background-image: url('/assets/img/bus.png');">
		<span class="mask bg-gradient-dark opacity-6"></span>
		<!--<div class="card card-body shadow-xl mx-3 mx-md-11 mt-n12">-->
		
		<div class="card card-body marginstyle shadow-xl mx-3 mx-md-11 mt-n12">
			<!-- 여기 -->
			
			<div class="container">
		        <span th:text="${message}">메시지</span>
		        <div class="content">
		           
		            <table class="table table-hover table-bordered" id="noticetable">
		                <thead>
		                    <tr>
		                        <th>게시판 ID</th>
		                        <th>제목</th>
		                    </tr>
		                </thead>
		                <tbody>
		                    <tr th:each="notice : ${noticeList}">
		                        <td th:text="${notice.noticeId}">게시판 ID</td>
		                        <td>
		                            <a th:href="@{/notice/{noticeId}(noticeId=${notice.noticeId})}" th:text="${notice.title}">제목</a>
		                        </td>
		                    </tr>
		                </tbody>
		            </table>
		            
		            <form th:action="@{/notice/search/1}" id="searchForm" method="get">
		                <div class="pull-right" style="margin-bottom: 5px;">
		                    <div class="col-xs-9">
		                        <input type="text" id="keyword" name="keyword" class="form-control">
		                    </div>
		                    <input type="submit" class="btn btn-warning" value="검색">
		                </div>
		            </form>
		            
		            <table class="table">
		                <tr>
		                    <!--<td align="left">
		                        <th:block th:replace="~{/include/paging :: paging(categoryId=${categoryId}, totalPageCount=${totalPageCount}, nowPage=${page})}"></th:block>
		                    </td>-->
		                    <td align="right">
		                        <a th:href="@{/notice/write}">
		                            <button type="button" class="btn btn-info">새 글 작성</button>
		                        </a>
		                    </td>
		                </tr>
		            </table>
		        </div>
		    </div>
		    <!-- 페이징 -->
		    <section class="py-7">
			    <div class="container">
			        <div class="row justify-space-between py-2">
			            <div class="col-lg-4 mx-auto">
			                <ul class="pagination pagination-primary m-4">
			                    <!-- 이전 페이지 버튼 -->
			                    <li class="page-item" th:if="${nowPageBlock > 1}">
			                        <a class="page-link" th:href="@{/notice/list/{page}(page=${startPage - 1})}" aria-label="Previous">
			                            <span aria-hidden="true"><i class="material-icons" aria-hidden="true">chevron_left</i></span>
			                        </a>
			                    </li>
			
			                    <!-- 페이지 번호 -->
			                    <th:block th:each="pageNum : ${#numbers.sequence(startPage, endPage)}">
			                        <li class="page-item" th:class="${pageNum == nowPage} ? 'active' : ''">
			                            <a class="page-link" th:href="@{/notice/list/{page}(page=${pageNum})}" th:text="${pageNum}"></a>
			                        </li>
			                    </th:block>
			
			                    <!-- 다음 페이지 버튼 -->
			                    <li class="page-item" th:if="${nowPageBlock < totalPageBlock}">
			                        <a class="page-link" th:href="@{/notice/list/{page}(page=${endPage + 1})}" aria-label="Next">
			                            <span aria-hidden="true"><i class="material-icons" aria-hidden="true">chevron_right</i></span>
			                        </a>
			                    </li>
			                </ul>
			            </div>
			        </div>
			    </div>
			</section>
			<!-- -->
			
		</div>
	</div>


	


	<!-- footer -->
	<!-- Include footer fragment -->
	<div th:replace="~{fragments/footerFragment :: footer}"></div>

	<!--   Core JS Files   -->
	<script src="./assets/js/core/popper.min.js" type="text/javascript"></script>
	<script src="./assets/js/core/bootstrap.min.js" type="text/javascript"></script>
	<script src="./assets/js/plugins/perfect-scrollbar.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>



	<!--  Plugin for TypedJS, full documentation here: https://github.com/inorganik/CountUp.js -->
	<script src="./assets/js/plugins/countup.min.js"></script>





	<script src="./assets/js/plugins/choices.min.js"></script>



	<script src="./assets/js/plugins/prism.min.js"></script>
	<script src="./assets/js/plugins/highlight.min.js"></script>



	<!--  Plugin for Parallax, full documentation here: https://github.com/dixonandmoe/rellax -->
	<script src="./assets/js/plugins/rellax.min.js"></script>
	<!--  Plugin for TiltJS, full documentation here: https://gijsroge.github.io/tilt.js/ -->
	<script src="./assets/js/plugins/tilt.min.js"></script>
	<!--  Plugin for Selectpicker - ChoicesJS, full documentation here: https://github.com/jshjohnson/Choices -->
	<script src="./assets/js/plugins/choices.min.js"></script>


	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDTTfWur0PDbZWPr7Pmq8K3jiDp0_xUziI"></script>
	<script src="./assets/js/material-kit.min.js?v=3.0.4" type="text/javascript"></script>
</body>
<script>
	
	$("#searchForm").submit(function(event) {
    event.preventDefault();
    var keyword = $("#keyword").val();
    console.log(keyword);
    
    $.ajax({
        url: "/notice/search/1", // 페이지 번호가 필요하다면 동적으로 설정
        type: "get",
        data: { keyword: keyword },
        success: function(response) {
            $("#noticetable > tbody").empty(); // 테이블 초기화
            if (response.noticeList && response.noticeList.length > 0) {
                response.noticeList.forEach(function(notice) {
                    var str = "<tr>";
                    str += "<td>" + notice.noticeId + "</td>";
                    str += "<td><a href='/notice/" + notice.noticeId + "'>" + notice.title + "</a></td>";
                    str += "</tr>";
                    $("#noticetable > tbody").append(str);
                });
            }
        },
        error: function(xhr, status, error) {
            console.error(error);
        }
    });
});
</script>

</html>