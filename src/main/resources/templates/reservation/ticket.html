<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <style>
		.div1 {
			width: 500px;
			height: 750px;
			margin: auto;
		}
	</style>
</head>
<script src="//code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
<script src="http://html2canvas.hertzen.com/dist/html2canvas.js"></script>

<body class="text-center">
    <div id="screenshot" class="div1 mx-auto">
        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-lg">
            <path d="M8 6v6"></path>
            <path d="M15 6v6"></path>
            <path d="M2 12h19.6"></path>
            <path
                d="M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3">
            </path>
            <circle cx="7" cy="18" r="2"></circle>
            <path d="M9 18h5"></path>
            <circle cx="16" cy="18" r="2"></circle>
        </svg>
        <h1 class="text-xl font-bold">시외버스 승차권</h1> <hr>
        <div class="">
            <p class="text-sm">출발일시</p>
            <p class="text-lg font-semibold">2023년 04월 25일 13:30</p>
        </div>
        <div>
            <img th:src="@{'data:image/jpeg;base64,'+${img}}" width="150" height="150"
                style="aspect-ratio: 150 / 150; object-fit: cover;">
            <p class="text-center pb-4">20230423080424</p>
        </div>
        <table class="table table-bordered">
            <tbody class="[&amp;_tr:last-child]:border-0">
                <tr class="border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted">
                    <td class="col-md-6 align-middle"><b>동서울역</b><br> 출발 </td>
                    <td class="col-md-6 align-middle"><b>부산역</b> <br> 도착</td>
                </tr>
            </tbody>
        </table>
        <p class="text-xl text-center fw-bold"> 요금 3,000원 (부가가치세 포함)</p>
        <table class="table table-bordered">
            <tbody class="[&amp;_tr:last-child]:border-0">
                <tr class="border-b ">
                    <td class="col-md-6 align-middle ">출발시간 <br> Time <span style="float: right;"> 13:30</span></td>
                    <td class="col-md-6 align-middle ">좌석 <br> Seat <span style="float: right;"> 6</span></td>
                </tr>
                <tr class="border-b ">
                    <td class="col-md-6 align-middle">운송회사 <br> Express Co
                        <span style="float: right;"> 금호</span></td>
                    <td class="col-md-6 align-middle ">승차홈 <br> platform
                    </td>
                </tr>
            </tbody>
        </table>
            <p>결제일자 20230423 승인액 3,000</p>

    </div>

    <button type="button" id="save">다운로드</button>
    <div id="img" style="display: none;"></div>
    <a id="downloadLink"></a>


</body>
<script>
    $(function () {
            $("#save").click(function () {
                html2canvas($('#screenshot').get(0)).then(function (canvas) {
                    document.getElementById('img').appendChild(canvas);

                    var dataURL = canvas.toDataURL('image/png');

                    var downloadLink = document.getElementById('downloadLink');
                    downloadLink.href = dataURL;

                    downloadLink.download = 'screenshot.png';

                    downloadLink.click(); 
                });
            });
        });
</script>

</html>